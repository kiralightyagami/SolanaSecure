import { TimelineEvent } from "@/lib/types"
import { Card } from "@/components/ui/card"

interface TimelineProps {
  events: TimelineEvent[]
}

export function Timeline({ events }: TimelineProps) {
  
  const sortedEvents = [...events].sort(
    (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()
  )

  return (
    <div className="relative">
      {/* Vertical line */}
      <div className="absolute left-3.5 top-0 h-full w-px bg-border" />

      <div className="space-y-6">
        {sortedEvents.map((event, index) => (
          <div key={index} className="relative flex gap-4">
            {/* Timeline dot */}
            <div className="absolute left-0 top-1 h-7 w-7 rounded-full border border-primary bg-background flex items-center justify-center z-10">
              <div className="h-3 w-3 rounded-full bg-primary" />
            </div>

            <div className="ml-10">
              <Card className="p-4">
                <div className="flex flex-col gap-1">
                  <h4 className="font-semibold">{event.title}</h4>
                  <time className="text-xs text-muted-foreground">
                    {new Date(event.date).toLocaleString("en-US", {
                      dateStyle: "medium",
                      timeStyle: "short",
                    })}
                  </time>
                  <p className="mt-2 text-sm">{event.description}</p>
                </div>
              </Card>
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}